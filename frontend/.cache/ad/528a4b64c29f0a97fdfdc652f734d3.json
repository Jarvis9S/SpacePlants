{"id":"../../backend/app/api/helper.js","dependencies":[{"name":"/Users/javier/Documents/GitHub/SpacePlantGatherer/frontend/package.json","includedInParent":true,"mtime":1635767683598},{"name":"../account/helper.js","loc":{"line":1,"column":25},"parent":"/Users/javier/Documents/GitHub/SpacePlantGatherer/backend/app/api/helper.js","resolved":"/Users/javier/Documents/GitHub/SpacePlantGatherer/backend/app/account/helper.js"},{"name":"../account/session.js","loc":{"line":2,"column":24},"parent":"/Users/javier/Documents/GitHub/SpacePlantGatherer/backend/app/api/helper.js","resolved":"/Users/javier/Documents/GitHub/SpacePlantGatherer/backend/app/account/session.js"},{"name":"../account/table.js","loc":{"line":3,"column":29},"parent":"/Users/javier/Documents/GitHub/SpacePlantGatherer/backend/app/api/helper.js","resolved":"/Users/javier/Documents/GitHub/SpacePlantGatherer/backend/app/account/table.js"}],"generated":{"js":"var _require = require(\"../account/helper.js\"),\n    hash = _require.hash;\n\nvar Session = require(\"../account/session.js\");\n\nvar AccountTable = require(\"../account/table.js\");\n\nvar setSession = function setSession(_ref) {\n  var username = _ref.username,\n      res = _ref.res,\n      sessionId = _ref.sessionId;\n  return new Promise(function (resolve, reject) {\n    var session, sessionString;\n\n    if (sessionId) {\n      sessionString = Session.sessionString({\n        username: username,\n        id: sessionId\n      });\n      setSessionCookie({\n        sessionString: sessionString,\n        res: res\n      });\n      resolve({\n        message: \"Session restored\"\n      });\n    } else {\n      var _session = new Session({\n        username: username\n      });\n\n      var _sessionString = _session.toString();\n\n      AccountTable.updateSessionId({\n        sessionId: _session.id,\n        usernameHash: hash(username)\n      }).then(function () {\n        setSessionCookie({\n          sessionString: _sessionString,\n          res: res\n        });\n        resolve({\n          message: \"session created\"\n        });\n      }).catch(function (error) {\n        return reject(error);\n      });\n    }\n  });\n};\n\nvar setSessionCookie = function setSessionCookie(_ref2) {\n  var sessionString = _ref2.sessionString,\n      res = _ref2.res;\n  res.cookie(\"sessionString\", sessionString, {\n    expire: Date.now() + 3600000,\n    httpOnly: true //            secure: true  //   USE WITH HTTPS\n\n  });\n};\n\nmodule.exports = {\n  setSession: setSession\n};"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":1,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":1,"column":0}},{"name":"require","generated":{"line":1,"column":15},"source":"../../backend/app/api/helper.js","original":{"line":1,"column":17}},{"generated":{"line":1,"column":22},"source":"../../backend/app/api/helper.js","original":{"line":1,"column":24}},{"generated":{"line":1,"column":23},"source":"../../backend/app/api/helper.js","original":{"line":1,"column":25}},{"generated":{"line":1,"column":45},"source":"../../backend/app/api/helper.js","original":{"line":1,"column":24}},{"generated":{"line":1,"column":46},"source":"../../backend/app/api/helper.js","original":{"line":1,"column":0}},{"generated":{"line":2,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":1,"column":0}},{"name":"hash","generated":{"line":2,"column":4},"source":"../../backend/app/api/helper.js","original":{"line":1,"column":8}},{"generated":{"line":2,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":1,"column":0}},{"name":"hash","generated":{"line":2,"column":20},"source":"../../backend/app/api/helper.js","original":{"line":1,"column":8}},{"generated":{"line":2,"column":24},"source":"../../backend/app/api/helper.js","original":{"line":1,"column":0}},{"generated":{"line":4,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":2,"column":0}},{"name":"Session","generated":{"line":4,"column":4},"source":"../../backend/app/api/helper.js","original":{"line":2,"column":6}},{"generated":{"line":4,"column":11},"source":"../../backend/app/api/helper.js","original":{"line":2,"column":13}},{"name":"require","generated":{"line":4,"column":14},"source":"../../backend/app/api/helper.js","original":{"line":2,"column":16}},{"generated":{"line":4,"column":21},"source":"../../backend/app/api/helper.js","original":{"line":2,"column":23}},{"generated":{"line":4,"column":22},"source":"../../backend/app/api/helper.js","original":{"line":2,"column":24}},{"generated":{"line":4,"column":45},"source":"../../backend/app/api/helper.js","original":{"line":2,"column":23}},{"generated":{"line":4,"column":46},"source":"../../backend/app/api/helper.js","original":{"line":2,"column":0}},{"generated":{"line":6,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":3,"column":0}},{"name":"AccountTable","generated":{"line":6,"column":4},"source":"../../backend/app/api/helper.js","original":{"line":3,"column":6}},{"generated":{"line":6,"column":16},"source":"../../backend/app/api/helper.js","original":{"line":3,"column":18}},{"name":"require","generated":{"line":6,"column":19},"source":"../../backend/app/api/helper.js","original":{"line":3,"column":21}},{"generated":{"line":6,"column":26},"source":"../../backend/app/api/helper.js","original":{"line":3,"column":28}},{"generated":{"line":6,"column":27},"source":"../../backend/app/api/helper.js","original":{"line":3,"column":29}},{"generated":{"line":6,"column":48},"source":"../../backend/app/api/helper.js","original":{"line":3,"column":28}},{"generated":{"line":6,"column":49},"source":"../../backend/app/api/helper.js","original":{"line":3,"column":0}},{"generated":{"line":8,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":0}},{"name":"setSession","generated":{"line":8,"column":4},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":6}},{"generated":{"line":8,"column":14},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":16}},{"generated":{"line":8,"column":17},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":19}},{"name":"setSession","generated":{"line":8,"column":26},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":6}},{"generated":{"line":8,"column":36},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":19}},{"generated":{"line":8,"column":43},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":53}},{"generated":{"line":9,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":53}},{"name":"username","generated":{"line":9,"column":6},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":22}},{"generated":{"line":9,"column":14},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":53}},{"name":"username","generated":{"line":9,"column":22},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":22}},{"generated":{"line":9,"column":30},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":53}},{"generated":{"line":10,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":53}},{"name":"res","generated":{"line":10,"column":6},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":32}},{"generated":{"line":10,"column":9},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":53}},{"name":"res","generated":{"line":10,"column":17},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":32}},{"generated":{"line":10,"column":20},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":53}},{"generated":{"line":11,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":53}},{"name":"sessionId","generated":{"line":11,"column":6},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":37}},{"generated":{"line":11,"column":15},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":53}},{"name":"sessionId","generated":{"line":11,"column":23},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":37}},{"generated":{"line":11,"column":32},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":53}},{"generated":{"line":12,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":6,"column":4}},{"generated":{"line":12,"column":9},"source":"../../backend/app/api/helper.js","original":{"line":6,"column":11}},{"name":"Promise","generated":{"line":12,"column":13},"source":"../../backend/app/api/helper.js","original":{"line":6,"column":15}},{"generated":{"line":12,"column":20},"source":"../../backend/app/api/helper.js","original":{"line":6,"column":11}},{"generated":{"line":12,"column":21},"source":"../../backend/app/api/helper.js","original":{"line":6,"column":23}},{"name":"resolve","generated":{"line":12,"column":31},"source":"../../backend/app/api/helper.js","original":{"line":6,"column":24}},{"generated":{"line":12,"column":38},"source":"../../backend/app/api/helper.js","original":{"line":6,"column":23}},{"name":"reject","generated":{"line":12,"column":40},"source":"../../backend/app/api/helper.js","original":{"line":6,"column":33}},{"generated":{"line":12,"column":46},"source":"../../backend/app/api/helper.js","original":{"line":6,"column":23}},{"generated":{"line":12,"column":48},"source":"../../backend/app/api/helper.js","original":{"line":6,"column":44}},{"generated":{"line":13,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":7,"column":8}},{"name":"session","generated":{"line":13,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":7,"column":12}},{"generated":{"line":13,"column":15},"source":"../../backend/app/api/helper.js","original":{"line":7,"column":8}},{"name":"sessionString","generated":{"line":13,"column":17},"source":"../../backend/app/api/helper.js","original":{"line":7,"column":21}},{"generated":{"line":13,"column":30},"source":"../../backend/app/api/helper.js","original":{"line":7,"column":8}},{"generated":{"line":15,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":9,"column":8}},{"name":"sessionId","generated":{"line":15,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":9,"column":12}},{"generated":{"line":15,"column":17},"source":"../../backend/app/api/helper.js","original":{"line":9,"column":8}},{"generated":{"line":15,"column":19},"source":"../../backend/app/api/helper.js","original":{"line":9,"column":23}},{"name":"sessionString","generated":{"line":16,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":12}},{"name":"sessionString","generated":{"line":16,"column":6},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":12}},{"generated":{"line":16,"column":19},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":25}},{"name":"Session","generated":{"line":16,"column":22},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":28}},{"generated":{"line":16,"column":29},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":35}},{"name":"sessionString","generated":{"line":16,"column":30},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":36}},{"generated":{"line":16,"column":43},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":28}},{"generated":{"line":16,"column":44},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":50}},{"name":"username","generated":{"line":17,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":52}},{"name":"username","generated":{"line":17,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":52}},{"generated":{"line":17,"column":16},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":60}},{"name":"username","generated":{"line":17,"column":18},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":52}},{"generated":{"line":17,"column":26},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":50}},{"name":"id","generated":{"line":18,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":62}},{"name":"id","generated":{"line":18,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":62}},{"generated":{"line":18,"column":10},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":64}},{"name":"sessionId","generated":{"line":18,"column":12},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":66}},{"generated":{"line":19,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":50}},{"generated":{"line":19,"column":7},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":28}},{"generated":{"line":19,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":10,"column":12}},{"name":"setSessionCookie","generated":{"line":20,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":11,"column":12}},{"name":"setSessionCookie","generated":{"line":20,"column":6},"source":"../../backend/app/api/helper.js","original":{"line":11,"column":12}},{"generated":{"line":20,"column":22},"source":"../../backend/app/api/helper.js","original":{"line":11,"column":28}},{"generated":{"line":20,"column":23},"source":"../../backend/app/api/helper.js","original":{"line":11,"column":29}},{"name":"sessionString","generated":{"line":21,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":11,"column":31}},{"name":"sessionString","generated":{"line":21,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":11,"column":31}},{"generated":{"line":21,"column":21},"source":"../../backend/app/api/helper.js","original":{"line":11,"column":44}},{"name":"sessionString","generated":{"line":21,"column":23},"source":"../../backend/app/api/helper.js","original":{"line":11,"column":31}},{"generated":{"line":21,"column":36},"source":"../../backend/app/api/helper.js","original":{"line":11,"column":29}},{"name":"res","generated":{"line":22,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":11,"column":46}},{"name":"res","generated":{"line":22,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":11,"column":46}},{"generated":{"line":22,"column":11},"source":"../../backend/app/api/helper.js","original":{"line":11,"column":49}},{"name":"res","generated":{"line":22,"column":13},"source":"../../backend/app/api/helper.js","original":{"line":11,"column":46}},{"generated":{"line":23,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":11,"column":29}},{"generated":{"line":23,"column":7},"source":"../../backend/app/api/helper.js","original":{"line":11,"column":28}},{"generated":{"line":23,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":11,"column":12}},{"name":"resolve","generated":{"line":24,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":13,"column":12}},{"name":"resolve","generated":{"line":24,"column":6},"source":"../../backend/app/api/helper.js","original":{"line":13,"column":12}},{"generated":{"line":24,"column":13},"source":"../../backend/app/api/helper.js","original":{"line":13,"column":19}},{"generated":{"line":24,"column":14},"source":"../../backend/app/api/helper.js","original":{"line":13,"column":20}},{"name":"message","generated":{"line":25,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":13,"column":22}},{"name":"message","generated":{"line":25,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":13,"column":22}},{"generated":{"line":25,"column":15},"source":"../../backend/app/api/helper.js","original":{"line":13,"column":29}},{"generated":{"line":25,"column":17},"source":"../../backend/app/api/helper.js","original":{"line":13,"column":31}},{"generated":{"line":26,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":13,"column":20}},{"generated":{"line":26,"column":7},"source":"../../backend/app/api/helper.js","original":{"line":13,"column":19}},{"generated":{"line":26,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":13,"column":12}},{"generated":{"line":27,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":14,"column":9}},{"generated":{"line":27,"column":5},"source":"../../backend/app/api/helper.js","original":{"line":9,"column":8}},{"generated":{"line":27,"column":11},"source":"../../backend/app/api/helper.js","original":{"line":14,"column":15}},{"generated":{"line":28,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":15,"column":12}},{"name":"session","generated":{"line":28,"column":10},"source":"../../backend/app/api/helper.js","original":{"line":15,"column":18}},{"generated":{"line":28,"column":18},"source":"../../backend/app/api/helper.js","original":{"line":15,"column":25}},{"generated":{"line":28,"column":21},"source":"../../backend/app/api/helper.js","original":{"line":15,"column":28}},{"name":"Session","generated":{"line":28,"column":25},"source":"../../backend/app/api/helper.js","original":{"line":15,"column":32}},{"generated":{"line":28,"column":32},"source":"../../backend/app/api/helper.js","original":{"line":15,"column":28}},{"generated":{"line":28,"column":33},"source":"../../backend/app/api/helper.js","original":{"line":15,"column":40}},{"name":"username","generated":{"line":29,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":15,"column":42}},{"name":"username","generated":{"line":29,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":15,"column":42}},{"generated":{"line":29,"column":16},"source":"../../backend/app/api/helper.js","original":{"line":15,"column":50}},{"name":"username","generated":{"line":29,"column":18},"source":"../../backend/app/api/helper.js","original":{"line":15,"column":42}},{"generated":{"line":30,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":15,"column":40}},{"generated":{"line":30,"column":7},"source":"../../backend/app/api/helper.js","original":{"line":15,"column":28}},{"generated":{"line":30,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":15,"column":12}},{"generated":{"line":32,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":16,"column":12}},{"name":"sessionString","generated":{"line":32,"column":10},"source":"../../backend/app/api/helper.js","original":{"line":16,"column":18}},{"generated":{"line":32,"column":24},"source":"../../backend/app/api/helper.js","original":{"line":16,"column":31}},{"name":"session","generated":{"line":32,"column":27},"source":"../../backend/app/api/helper.js","original":{"line":16,"column":34}},{"generated":{"line":32,"column":35},"source":"../../backend/app/api/helper.js","original":{"line":16,"column":41}},{"name":"toString","generated":{"line":32,"column":36},"source":"../../backend/app/api/helper.js","original":{"line":16,"column":42}},{"generated":{"line":32,"column":44},"source":"../../backend/app/api/helper.js","original":{"line":16,"column":34}},{"generated":{"line":32,"column":46},"source":"../../backend/app/api/helper.js","original":{"line":16,"column":12}},{"name":"AccountTable","generated":{"line":34,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":18,"column":12}},{"name":"AccountTable","generated":{"line":34,"column":6},"source":"../../backend/app/api/helper.js","original":{"line":18,"column":12}},{"generated":{"line":34,"column":18},"source":"../../backend/app/api/helper.js","original":{"line":18,"column":24}},{"name":"updateSessionId","generated":{"line":34,"column":19},"source":"../../backend/app/api/helper.js","original":{"line":18,"column":25}},{"generated":{"line":34,"column":34},"source":"../../backend/app/api/helper.js","original":{"line":18,"column":12}},{"generated":{"line":34,"column":35},"source":"../../backend/app/api/helper.js","original":{"line":18,"column":41}},{"name":"sessionId","generated":{"line":35,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":19,"column":16}},{"name":"sessionId","generated":{"line":35,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":19,"column":16}},{"generated":{"line":35,"column":17},"source":"../../backend/app/api/helper.js","original":{"line":19,"column":25}},{"name":"session","generated":{"line":35,"column":19},"source":"../../backend/app/api/helper.js","original":{"line":19,"column":27}},{"generated":{"line":35,"column":27},"source":"../../backend/app/api/helper.js","original":{"line":19,"column":34}},{"name":"id","generated":{"line":35,"column":28},"source":"../../backend/app/api/helper.js","original":{"line":19,"column":35}},{"generated":{"line":35,"column":30},"source":"../../backend/app/api/helper.js","original":{"line":18,"column":41}},{"name":"usernameHash","generated":{"line":36,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":20,"column":16}},{"name":"usernameHash","generated":{"line":36,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":20,"column":16}},{"generated":{"line":36,"column":20},"source":"../../backend/app/api/helper.js","original":{"line":20,"column":28}},{"name":"hash","generated":{"line":36,"column":22},"source":"../../backend/app/api/helper.js","original":{"line":20,"column":30}},{"generated":{"line":36,"column":26},"source":"../../backend/app/api/helper.js","original":{"line":20,"column":34}},{"name":"username","generated":{"line":36,"column":27},"source":"../../backend/app/api/helper.js","original":{"line":20,"column":35}},{"generated":{"line":36,"column":35},"source":"../../backend/app/api/helper.js","original":{"line":20,"column":34}},{"generated":{"line":37,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":18,"column":41}},{"generated":{"line":37,"column":7},"source":"../../backend/app/api/helper.js","original":{"line":18,"column":12}},{"name":"then","generated":{"line":37,"column":9},"source":"../../backend/app/api/helper.js","original":{"line":22,"column":13}},{"generated":{"line":37,"column":13},"source":"../../backend/app/api/helper.js","original":{"line":18,"column":12}},{"generated":{"line":37,"column":14},"source":"../../backend/app/api/helper.js","original":{"line":22,"column":18}},{"generated":{"line":37,"column":26},"source":"../../backend/app/api/helper.js","original":{"line":22,"column":24}},{"name":"setSessionCookie","generated":{"line":38,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":23,"column":16}},{"name":"setSessionCookie","generated":{"line":38,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":23,"column":16}},{"generated":{"line":38,"column":24},"source":"../../backend/app/api/helper.js","original":{"line":23,"column":32}},{"generated":{"line":38,"column":25},"source":"../../backend/app/api/helper.js","original":{"line":23,"column":33}},{"name":"sessionString","generated":{"line":39,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":23,"column":35}},{"name":"sessionString","generated":{"line":39,"column":10},"source":"../../backend/app/api/helper.js","original":{"line":23,"column":35}},{"generated":{"line":39,"column":23},"source":"../../backend/app/api/helper.js","original":{"line":23,"column":48}},{"name":"sessionString","generated":{"line":39,"column":25},"source":"../../backend/app/api/helper.js","original":{"line":23,"column":35}},{"generated":{"line":39,"column":39},"source":"../../backend/app/api/helper.js","original":{"line":23,"column":33}},{"name":"res","generated":{"line":40,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":23,"column":50}},{"name":"res","generated":{"line":40,"column":10},"source":"../../backend/app/api/helper.js","original":{"line":23,"column":50}},{"generated":{"line":40,"column":13},"source":"../../backend/app/api/helper.js","original":{"line":23,"column":53}},{"name":"res","generated":{"line":40,"column":15},"source":"../../backend/app/api/helper.js","original":{"line":23,"column":50}},{"generated":{"line":41,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":23,"column":33}},{"generated":{"line":41,"column":9},"source":"../../backend/app/api/helper.js","original":{"line":23,"column":32}},{"generated":{"line":41,"column":10},"source":"../../backend/app/api/helper.js","original":{"line":23,"column":16}},{"name":"resolve","generated":{"line":42,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":24,"column":12}},{"name":"resolve","generated":{"line":42,"column":8},"source":"../../backend/app/api/helper.js","original":{"line":24,"column":12}},{"generated":{"line":42,"column":15},"source":"../../backend/app/api/helper.js","original":{"line":24,"column":19}},{"generated":{"line":42,"column":16},"source":"../../backend/app/api/helper.js","original":{"line":24,"column":20}},{"name":"message","generated":{"line":43,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":24,"column":22}},{"name":"message","generated":{"line":43,"column":10},"source":"../../backend/app/api/helper.js","original":{"line":24,"column":22}},{"generated":{"line":43,"column":17},"source":"../../backend/app/api/helper.js","original":{"line":24,"column":29}},{"generated":{"line":43,"column":19},"source":"../../backend/app/api/helper.js","original":{"line":24,"column":31}},{"generated":{"line":44,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":24,"column":20}},{"generated":{"line":44,"column":9},"source":"../../backend/app/api/helper.js","original":{"line":24,"column":19}},{"generated":{"line":44,"column":10},"source":"../../backend/app/api/helper.js","original":{"line":24,"column":12}},{"generated":{"line":45,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":25,"column":13}},{"generated":{"line":45,"column":7},"source":"../../backend/app/api/helper.js","original":{"line":18,"column":12}},{"name":"catch","generated":{"line":45,"column":9},"source":"../../backend/app/api/helper.js","original":{"line":26,"column":13}},{"generated":{"line":45,"column":14},"source":"../../backend/app/api/helper.js","original":{"line":18,"column":12}},{"generated":{"line":45,"column":15},"source":"../../backend/app/api/helper.js","original":{"line":26,"column":19}},{"name":"error","generated":{"line":45,"column":25},"source":"../../backend/app/api/helper.js","original":{"line":26,"column":19}},{"generated":{"line":45,"column":30},"source":"../../backend/app/api/helper.js","original":{"line":26,"column":24}},{"generated":{"line":46,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":26,"column":24}},{"name":"reject","generated":{"line":46,"column":15},"source":"../../backend/app/api/helper.js","original":{"line":26,"column":28}},{"generated":{"line":46,"column":21},"source":"../../backend/app/api/helper.js","original":{"line":26,"column":34}},{"name":"error","generated":{"line":46,"column":22},"source":"../../backend/app/api/helper.js","original":{"line":26,"column":35}},{"generated":{"line":46,"column":27},"source":"../../backend/app/api/helper.js","original":{"line":26,"column":34}},{"generated":{"line":46,"column":28},"source":"../../backend/app/api/helper.js","original":{"line":26,"column":24}},{"generated":{"line":47,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":26,"column":24}},{"generated":{"line":47,"column":7},"source":"../../backend/app/api/helper.js","original":{"line":18,"column":12}},{"generated":{"line":48,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":27,"column":9}},{"generated":{"line":49,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":28,"column":5}},{"generated":{"line":49,"column":3},"source":"../../backend/app/api/helper.js","original":{"line":6,"column":11}},{"generated":{"line":49,"column":4},"source":"../../backend/app/api/helper.js","original":{"line":6,"column":4}},{"generated":{"line":50,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":29,"column":1}},{"generated":{"line":50,"column":1},"source":"../../backend/app/api/helper.js","original":{"line":5,"column":0}},{"generated":{"line":52,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":0}},{"name":"setSessionCookie","generated":{"line":52,"column":4},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":6}},{"generated":{"line":52,"column":20},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":22}},{"generated":{"line":52,"column":23},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":25}},{"name":"setSessionCookie","generated":{"line":52,"column":32},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":6}},{"generated":{"line":52,"column":48},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":25}},{"generated":{"line":52,"column":56},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":53}},{"generated":{"line":53,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":53}},{"name":"sessionString","generated":{"line":53,"column":6},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":28}},{"generated":{"line":53,"column":19},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":53}},{"name":"sessionString","generated":{"line":53,"column":28},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":28}},{"generated":{"line":53,"column":41},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":53}},{"generated":{"line":54,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":53}},{"name":"res","generated":{"line":54,"column":6},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":43}},{"generated":{"line":54,"column":9},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":53}},{"name":"res","generated":{"line":54,"column":18},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":43}},{"generated":{"line":54,"column":21},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":53}},{"name":"res","generated":{"line":55,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":32,"column":4}},{"name":"res","generated":{"line":55,"column":2},"source":"../../backend/app/api/helper.js","original":{"line":32,"column":4}},{"generated":{"line":55,"column":5},"source":"../../backend/app/api/helper.js","original":{"line":32,"column":7}},{"name":"cookie","generated":{"line":55,"column":6},"source":"../../backend/app/api/helper.js","original":{"line":32,"column":8}},{"generated":{"line":55,"column":12},"source":"../../backend/app/api/helper.js","original":{"line":32,"column":4}},{"generated":{"line":55,"column":13},"source":"../../backend/app/api/helper.js","original":{"line":32,"column":15}},{"generated":{"line":55,"column":28},"source":"../../backend/app/api/helper.js","original":{"line":32,"column":4}},{"name":"sessionString","generated":{"line":55,"column":30},"source":"../../backend/app/api/helper.js","original":{"line":32,"column":32}},{"generated":{"line":55,"column":43},"source":"../../backend/app/api/helper.js","original":{"line":32,"column":4}},{"generated":{"line":55,"column":45},"source":"../../backend/app/api/helper.js","original":{"line":32,"column":47}},{"name":"expire","generated":{"line":56,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":33,"column":8}},{"name":"expire","generated":{"line":56,"column":4},"source":"../../backend/app/api/helper.js","original":{"line":33,"column":8}},{"generated":{"line":56,"column":10},"source":"../../backend/app/api/helper.js","original":{"line":33,"column":14}},{"name":"Date","generated":{"line":56,"column":12},"source":"../../backend/app/api/helper.js","original":{"line":33,"column":16}},{"generated":{"line":56,"column":16},"source":"../../backend/app/api/helper.js","original":{"line":33,"column":20}},{"name":"now","generated":{"line":56,"column":17},"source":"../../backend/app/api/helper.js","original":{"line":33,"column":21}},{"generated":{"line":56,"column":20},"source":"../../backend/app/api/helper.js","original":{"line":33,"column":16}},{"generated":{"line":56,"column":25},"source":"../../backend/app/api/helper.js","original":{"line":33,"column":29}},{"generated":{"line":56,"column":32},"source":"../../backend/app/api/helper.js","original":{"line":32,"column":47}},{"name":"httpOnly","generated":{"line":57,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":34,"column":8}},{"name":"httpOnly","generated":{"line":57,"column":4},"source":"../../backend/app/api/helper.js","original":{"line":34,"column":8}},{"generated":{"line":57,"column":12},"source":"../../backend/app/api/helper.js","original":{"line":34,"column":16}},{"generated":{"line":57,"column":14},"source":"../../backend/app/api/helper.js","original":{"line":34,"column":18}},{"generated":{"line":57,"column":18},"source":"../../backend/app/api/helper.js","original":{"line":32,"column":47}},{"generated":{"line":57,"column":19},"source":"../../backend/app/api/helper.js","original":{"line":35,"column":0}},{"generated":{"line":59,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":32,"column":47}},{"generated":{"line":59,"column":3},"source":"../../backend/app/api/helper.js","original":{"line":32,"column":4}},{"generated":{"line":60,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":37,"column":1}},{"generated":{"line":60,"column":1},"source":"../../backend/app/api/helper.js","original":{"line":31,"column":0}},{"name":"module","generated":{"line":62,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":39,"column":0}},{"generated":{"line":62,"column":6},"source":"../../backend/app/api/helper.js","original":{"line":39,"column":6}},{"name":"exports","generated":{"line":62,"column":7},"source":"../../backend/app/api/helper.js","original":{"line":39,"column":7}},{"generated":{"line":62,"column":14},"source":"../../backend/app/api/helper.js","original":{"line":39,"column":0}},{"generated":{"line":62,"column":17},"source":"../../backend/app/api/helper.js","original":{"line":39,"column":17}},{"name":"setSession","generated":{"line":63,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":39,"column":19}},{"name":"setSession","generated":{"line":63,"column":2},"source":"../../backend/app/api/helper.js","original":{"line":39,"column":19}},{"generated":{"line":63,"column":12},"source":"../../backend/app/api/helper.js","original":{"line":39,"column":29}},{"name":"setSession","generated":{"line":63,"column":14},"source":"../../backend/app/api/helper.js","original":{"line":39,"column":19}},{"generated":{"line":64,"column":0},"source":"../../backend/app/api/helper.js","original":{"line":39,"column":17}},{"generated":{"line":64,"column":1},"source":"../../backend/app/api/helper.js","original":{"line":39,"column":0}}],"sources":{"../../backend/app/api/helper.js":"const { hash } = require(\"../account/helper.js\");\nconst Session = require(\"../account/session.js\");\nconst AccountTable = require(\"../account/table.js\");\n\nconst setSession = ({ username, res, sessionId }) => {\n    return new Promise((resolve, reject) => {\n        let session, sessionString;\n\n        if (sessionId) {\n            sessionString = Session.sessionString({ username, id: sessionId });\n            setSessionCookie({ sessionString, res });\n\n            resolve({ message: \"Session restored\" })\n        } else {\n            const session = new Session({ username });\n            const sessionString = session.toString();\n\n            AccountTable.updateSessionId({ \n                sessionId: session.id,\n                usernameHash: hash(username) \n            })\n            .then(() => {\n                setSessionCookie({ sessionString, res });\n            resolve({ message: \"session created\" })\n            })\n            .catch(error => reject(error));\n        }\n    });\n}\n\nconst setSessionCookie = ({ sessionString, res }) => {\n    res.cookie(\"sessionString\", sessionString, {\n        expire: Date.now() + 3600000,\n        httpOnly: true,\n//            secure: true  //   USE WITH HTTPS\n});\n}\n\nmodule.exports = { setSession };"},"lineCount":null}},"error":null,"hash":"9fb01b3ee26f9d1ece527c96e9818e0a","cacheData":{"env":{}}}